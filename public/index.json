[
{
	"uri": "/2-cloudwatch-monitor/2-1-cloudwatch-log/",
	"title": "Create Git repository",
	"tags": [],
	"description": "",
	"content": " Run the following command to create a new CodeCommit repository  aws codecommit create-repository --repository-name fcj-book-store-backend You should see output similar to the following:\n{ \u0026#34;repositoryMetadata\u0026#34;: { \u0026#34;accountId\u0026#34;: \u0026#34;111111111111\u0026#34;, \u0026#34;repositoryId\u0026#34;: \u0026#34;b782c34e-77dc-4627-8aea-ae8bd5ea46c3\u0026#34;, \u0026#34;repositoryName\u0026#34;: \u0026#34;fcj-book-store-backend\u0026#34;, \u0026#34;lastModifiedDate\u0026#34;: \u0026#34;2022-09-19T11:49:51.325000+07:00\u0026#34;, \u0026#34;creationDate\u0026#34;: \u0026#34;2022-09-19T11:49:51.325000+07:00\u0026#34;, \u0026#34;cloneUrlHttp\u0026#34;: \u0026#34;https://git-codecommit.ap-southeast-1.amazonaws.com/v1/repos/fcj-book-store-backend\u0026#34;, \u0026#34;cloneUrlSsh\u0026#34;: \u0026#34;ssh://git-codecommit.ap-southeast-1.amazonaws.com/v1/repos/fcj-book-store-backend\u0026#34;, \u0026#34;Arn\u0026#34;: \u0026#34;arn:aws:codecommit:ap-southeast-1:111111111111:fcj-book-store-backend\u0026#34; } }  Open AWS CodeCommit console to check repository  Run the below commands at the sam project folder you downloaded - fcj-book-store-sam-ws7 to initialize a local Git repository, add code and push to CodeCommit repository.  git init -b main echo -e \u0026#34;\\n\\n.aws-sam\u0026#34; \u0026gt;\u0026gt; .gitignore git add . git commit -m \u0026#34;Initial commit\u0026#34; Add your CodeCommit repository URL as a remote on your local git project.  git remote add origin codecommit://fcj-book-store-backend \rIf origin already exists or url is wrong, can remove it by running: git remote rm origin\n\rPush code to CodeCommit repository by running the following command:  git push -u origin main Back to CodeCommit console   Click fcj-book-store-backend repository, you will see the code has been uploaded  "
},
{
	"uri": "/1-preparation/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "Before doing the main content of this workshop, we prepare the SAM project and download the front-end source to your machine.\n Download theh below source code of SAM project  \r\rSAM source\r\r\rfcj-book-store-sam-ws8.zip\r\r(10278 ko)\r\r\r\rRun the following command  sam build Run the following command to clone fcj-serverless-frontend code to your device  git clone https://github.com/PhamTHHanh/fcj-serverless-frontend.git Run the following command in the root folder of fcj-serverless-frontend to build project  yarn build We have prepared the necessary source for the next steps.\n"
},
{
	"uri": "/",
	"title": "Serverless - CI/CD with CodePipeline",
	"tags": [],
	"description": "",
	"content": "Serverless - CI/CD with CodePipeline Overview Continuous Integration, Continuous Delivery, Continuous Deployment (CI/CD) are software development practices for producing software in short cycles between merging source code changes and updating applications. The ultimate goal of these practices is to reduce the costs, time, and risks by delivering software in small pieces.\nIn workshop 7 of this series, we will know about CI/CD flow building so that every time you change and push source code on the git repository, it will automatically re-update our services and applications. There are many tools for us to build CI/CD, the most popular are Jenkins, Gitlab CI, Circle CI. In this workshop, we will use AWS\u0026rsquo;s CodePipeline.\nThe CI/CD Architecture for back-end:  The develop create a git repository on CodeCommit and pushes code of SAM project on it Every time the source code is updated, CodeBuild will automaticlly rebild and prepare the CloudFormation template CloudFormation creates/updates serverless services  The CI/CD Architecture for website front-end:\n The developer creates a git repo on CodeCommit and pushes the front-end code on it Every time the source code is updated, CodeBuild will automatically rebuild and then package the build folder Finally, the build folder is pushed to the S3 bucket with the static hosting website enabled  CI/CD CI\nContinuous Integration is a software development practice in which developers regularly commit and push their local changes back to the shared repository (usually several times a day). By fetching and merging changes from other developers they mitigated the risk of complicated conflict resolution. Before each commit, developers can run unit tests locally on their source code as an additional check before integrating. A continuous integration service automatically builds and runs unit tests on the new source code changes to catch any errors immediately.\nCD\nContinuous Delivery is a software development practice that extends Continuous Integration in which source code changes are automatically prepared for deployment to a production instance. After a build, the build artifact with new changes is deployed to a staging instance where advanced (integration, acceptance, load, end-to-end, etc.) tests are run. If needed, the build artifact is automatically deployed to the production instance after manual approval.\nContinuous Deployment is a software development practice that extends Continuous Delivery in which source code changes are automatically deployed to a production instance. The difference between Continuous Delivery and Continuous Deployment is the presence of manual approval. With Continuous Delivery, deployment to production occurs automatically after manual approval. With Continuous Deployment, deployment to production occurs automatically without manual approval.\nContent  Preparation Build SAM pipeline Build pipeline for frontend Test web operation Cleanup  "
},
{
	"uri": "/2-cloudwatch-monitor/",
	"title": "Build SAM pipeline",
	"tags": [],
	"description": "",
	"content": "In this chapter you are going to learn how to automate the build, package and deploy commands by creating a continous delivery pipeline using AWS Code Pipeline. We will be using SAM Pipelines to generate and a self-updating, multi-stage CI/CD pipeline.\nAWS SAM Pipelines SAM Pipelines works by creating a set of configuration and infrastructure files you use to create and manage your CI/CD pipeline.\nAs of this writing, SAM Pipelines can bootstrap CI/CD pipelines for the following providers:\n Jenkins GitLab CI/CD GitHub Actions Bitbucket Pipelines AWS CodePipeline  SAM Pipelines creates appropriate configuration files for your CI/CD provider of choice. For example, when using GitHub Actions SAM will synthesize a .github/workflows/pipeline.yaml file. This file defines your CI/CD pipeline using GitHub Actions. In this workshop we will be using AWS CodePipeline. As you will soon see, SAM creates multiple files, one of which is a CloudFormation template named codepipeline.yaml. This template defines multiple AWS resources that work together to deploy our serverless application automatically.\nContent  Create Git repository Create SAM pipeline  "
},
{
	"uri": "/2-cloudwatch-monitor/2-2-cloudwatch-metric/",
	"title": "Create SAM pipeline",
	"tags": [],
	"description": "",
	"content": "There are three distinct steps with SAM Pipelines and AWS CodePipeline.\n Create required IAM roles and infrastructure Create CloudFormation pipeline template Deploy CloudFormation pipeline template  SAM Pipelines automates all of this for us\nCreate required IAM roles and infrastructure  Run the following command:  sam pipeline init --bootstrap Answer the questions with the following list:   Select a pipeline template to get started: AWS Quick Start Pipeline Templates (1) Select CI/CD system: AWS CodePipeline (5) Do you want to go through stage setup process now? [y/N]: y [1] Stage definition. Stage configuration name: dev [2] Account details. Select a credential source to associate with this stage: default (named profile) (2) Enter the region in which you want these resources to be created: Your region of choice Enter the pipeline IAM user ARN if you have previously … [] return/enter Enter the pipeline execution role ARN if you have previously … []: return/enter Enter the CloudFormation execution role ARN if you have previously … []: return/enter Please enter the artifact bucket ARN for your Lambda function. If you do not … []: return/enter Does your application contain any IMAGE type Lambda functions? [y/N]: N Press enter to confirm the values above … : return/enter Should we proceed with the creation? [y/N]: y  sam pipeline init generates a pipeline configuration file that your CI/CD system can use to deploy serverless applications using AWS SAM. We will guide you through the process to bootstrap resources for each stage, then walk through the details necessary for creating the pipeline config file. Please ensure you are in the root folder of your SAM application before you begin. Select a pipeline template to get started: 1 - AWS Quick Start Pipeline Templates 2 - Custom Pipeline Template Location Choice: 1 Cloning from https://github.com/aws/aws-sam-cli-pipeline-init-templates.git (process may take a moment) Select CI/CD system 1 - Jenkins 2 - GitLab CI/CD 3 - GitHub Actions 4 - Bitbucket Pipelines 5 - AWS CodePipeline Choice: 5 You are using the 2-stage pipeline template. _________ _________ | | | | | Stage 1 |-\u0026gt;| Stage 2 | |_________| |_________| Checking for existing stages... [!] None detected in this account. Do you want to go through stage setup process now? If you choose no, you can still reference other bootstrapped resources. [y/N]: y For each stage, we will ask for [1] stage definition, [2] account details, and [3] reference application build resources in order to bootstrap these pipeline resources. We recommend using an individual AWS account profiles for each stage in your pipeline. You can set these profiles up using aws configure or ~/.aws/credentials. See [https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-getting-started-set-up-credentials.html]. Stage 1 Setup [1] Stage definition Enter a configuration name for this stage. This will be referenced later when you use the sam pipeline init command: Stage configuration name: dev [2] Account details The following AWS credential sources are available to use. To know more about configuration AWS credentials, visit the link below: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html 1 - Environment variables (not available) 2 - default (named profile) 3 - produser (named profile) q - Quit and configure AWS credentials Select a credential source to associate with this stage: 2 Associated account 885078239936 with configuration dev. Enter the region in which you want these resources to be created [ap-southeast-1]: ap-southeast-1 Enter the pipeline IAM user ARN if you have previously created one, or we will create one for you []: [3] Reference application build resources Enter the pipeline execution role ARN if you have previously created one, or we will create one for you []: Enter the CloudFormation execution role ARN if you have previously created one, or we will create one for you []: Please enter the artifact bucket ARN for your Lambda function. If you do not have a bucket, we will create one for you []: Does your application contain any IMAGE type Lambda functions? [y/N]: n [4] Summary Below is the summary of the answers: 1 - Account: 885078239936 2 - Stage configuration name: dev 3 - Region: ap-southeast-1 4 - Pipeline user: [to be created] 5 - Pipeline execution role: [to be created] 6 - CloudFormation execution role: [to be created] 7 - Artifacts bucket: [to be created] 8 - ECR image repository: [skipped] Press enter to confirm the values above, or select an item to edit the value: This will create the following required resources for the \u0026#39;dev\u0026#39; configuration: - Pipeline IAM user - Pipeline execution role - CloudFormation execution role - Artifact bucket Should we proceed with the creation? [y/N]: y Creating the required resources... Checking for existing stages... Once this completes, you will see output which looks like the following:\nSuccessfully created! The following resources were created in your account: - Pipeline IAM user - Pipeline execution role - CloudFormation execution role - Artifact bucket Pipeline IAM user credential: AWS_ACCESS_KEY_ID: AAAAAAAAAAAAIFRDVPDX AWS_SECRET_ACCESS_KEY: xxxxxxxxxxxxxxxxxxxxxxkMYI9RatNgVcIybUwh Open CloudFormation console  Click Stacks on the left menu to check if the stack has been created.   Click to the displayed stack  Click Resources tab, resources have been initialized  Back to the SAM pipeline creation screen   Enter \u0026ldquo;N\u0026rdquo; to not create a second stage  Create CloudFormation pipeline template We continue to create a CloudFormation template that defines the entire CI/CD pipeline\n Answer the questions with the following list:   What is the Git provider? Choice []: CodeCommit (2) What is the CodeCommit repository name?: fcj-book-store-backend What is the Git branch used for production deployments? [main]: main What is the template file path? [template.yaml]: template.yaml Select an index or enter the stage 1’s configuration name (as provided during the bootstrapping): 1 What is the sam application stack name for stage 1? [sam-app]: fcj-book-store-backend-dev Select an index or enter the stage 2’s configuration name (as provided during the bootstrapping): 1 What is the sam application stack name for stage 2? [sam-app]: fcj-book-store-backend-dev  What is the Git provider? 1 - Bitbucket 2 - CodeCommit 3 - GitHub 4 - GitHubEnterpriseServer Choice []: 2 What is the CodeCommit repository name?: fcj-book-store-backend What is the Git branch used for production deployments? [main]: main What is the template file path? [template.yaml]: template.yaml We use the stage configuration name to automatically retrieve the bootstrapped resources created when you ran `sam pipeline bootstrap`. Here are the stage configuration names detected in .aws-sam/pipeline/pipelineconfig.toml: 1 - dev 2 - prod Select an index or enter the stage 1\u0026#39;s configuration name (as provided during the bootstrapping): 1 What is the sam application stack name for stage 1? [sam-app]: fcj-book-store-backend-dev Stage 1 configured successfully, configuring stage 2. Here are the stage configuration names detected in .aws-sam/pipeline/pipelineconfig.toml: 1 - dev 2 - prod Select an index or enter the stage 2\u0026#39;s configuration name (as provided during the bootstrapping): 1 What is the sam application stack name for stage 2? [sam-app]: fcj-book-store-backend-dev Stage 2 configured successfully. To deploy this template and connect to the main git branch, run this against the leading account: `sam deploy -t codepipeline.yaml --stack-name \u0026lt;stack-name\u0026gt; --capabilities=CAPABILITY_IAM`. SUMMARY We will generate a pipeline config file based on the following information: What is the Git provider?: CodeCommit What is the CodeCommit repository name?: fcj-book-store-backend ………………… What is the ECR repository URI for stage 2?: What is the AWS region for stage 2?: ap-southeast-1 Successfully created the pipeline configuration file(s): - codepipeline.yaml - assume-role.sh - pipeline/buildspec_unit_test.yml - pipeline/buildspec_build_package.yml - pipeline/buildspec_integration_test.yml - pipeline/buildspec_feature.yml - pipeline/buildspec_deploy.yml Once this completes, your project should have the structure below  └── fcj-book-store-sam-ws7 ├── codepipeline.yaml # (new) CodePipeline CloudFormation template ├── assume-role.sh # (new) Helper script for CodePipeline ├── pipeline/ # (new) Build Specs for CodeBuild ├── events ├── fcj-book-store/ # SAM application root ├── README.md └── template.yaml # SAM template Deploy CloudFormation pipeline template  Run the following commands to upload the newly created folders and files to the CodeCommit repository  git add . git commit -m \u0026#34;Adding SAM CI/CD Pipeline definition\u0026#34; git push Then, deplou SAM Pipeline by the following command:  sam deploy -t codepipeline.yaml --stack-name fcj-book-store-backend-pipeline --capabilities=CAPABILITY_IAM Wait for a while, back to the CloudFormation console to check   Reload the stack list Select fcj-book-store-backend stack  Open CodePipeline console  A pipeline is being processed  Wait for a while to to complete pipeline processing  Back to the CloudFormation console, reload the stack list   Select fcj-book-store-backend-dev stack Click Outputs tab Note down the API URL to use in the next step  So we have successfully deployed SAM Pipeline. The next step is to develop the pipeline for the front-end part of the web application.\n"
},
{
	"uri": "/3-x-ray-trace/",
	"title": "Build pipeline for front-end",
	"tags": [],
	"description": "",
	"content": "In this chapter, we will create a new pipeline with AWS CodePipeline by console for S3 Single Page Application. Using CodeCommit repository to saves source code, CodeBuild to build application and S3 to deploy application.\nNội dung  Create Git repository Create pipeline  "
},
{
	"uri": "/4-cleanup/",
	"title": "Cleanup",
	"tags": [],
	"description": "",
	"content": " Empty S3 bucket   Open AWS S3 console Select fcj-book-store Click Empty Enter permanently delete Click Empty Do the same for bucket starting with aws-sam-cli-managed-default- and book-image-resize-store bucket  Delete pipeline   Open AWS CodePipeline console Select fcj-book-store-frontend-pipeline pipeline Click Delete pipeline Enter delete Click Delete  Delete CloudFormation stacks and CodeCommit repository   Execute the below commands:  aws codecommit delete-repository --repository-name fcj-book-store-backend aws codecommit delete-repository --repository-name fcj-book-store-frontend sam delete --stack-name fcj-book-store-backend-dev sam delete --stack-name fcj-book-store-backend sam delete --stack-name aws-sam-cli-managed-dev-pipeline-resourcest "
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]